<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旅遊網誌</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
    <header id="header">
      <div class="logo">
        <i class="fas fa-map-marked-alt"></i>
        <span>旅行日記</span>
      </div>
      <nav>
        <ul class="nav-menu">
            <li class="nav-item"><a href="index.html" class="nav-link active">首頁</a></li>
            <li class="nav-item"><a href="destinations.html" class="nav-link">目的地</a></li>
            <li class="nav-item"><a href="about.html" class="nav-link">關於我</a></li>
            <li class="nav-item"><a href="blog.html" class="nav-link">旅遊日記</a></li>
            <li class="nav-item"><a href="contact.html" class="nav-link">聯絡</a></li>
        </ul>
      </nav>
    </header>
    <section class="hero">
        <h1>探索世界的美麗</h1>
        <p>與我們一起踏上旅程，發現未知的風景和文化。</p>
        <button class="hero-btn">開始探索</button>
    </section>
    <main id="main-content">
      <div class="container">
        <div class="content-wrapper">
          <div class="posts">
            <h2>最新文章</h2>
            <div class="posts-grid">
                
            </div>
          </div>
          <aside class="aside">
            <div class="widget" style="opacity: 1; transform: translateY(0px); transition: opacity 0.6s, transform 0.6s;">
                <h3>標籤分類</h3>
                <div class="tags-cloud">
                    <a href="#" class="tag-link active">全部</a>
                    <a href="#" class="tag-link">日本 (5)</a>
                    <a href="#" class="tag-link">歐洲 (3)</a>
                    <a href="#" class="tag-link">親子 (2)</a>
                    <a href="#" class="tag-link">美食 (4)</a>
                    <a href="#" class="tag-link">文化 (6)</a>
                    <a href="#" class="tag-link">攝影 (3)</a>
                </div>
            </div>
          </aside>
        </div>
      </div>
    </main>
    <footer></footer>
    <button id="backToTop" class="back-to-top" style="position: fixed; bottom: 20px; right: 20px; background: rgb(44, 90, 160); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 10px; opacity: 0; transform: translateY(0px); transition: 0.3s; z-index: 1000;"><i class="fas fa-arrow-up"></i></button>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>   
        let backToTopButton = document.getElementById('backToTop');
        $(window).scroll(() => {
            if (window.scrollY > 300) {
                backToTopButton.style.opacity = '1';
                backToTopButton.style.transform = 'translateY(0)';
            } else {
                backToTopButton.style.opacity = '0';
                backToTopButton.style.transform = 'translateY(20px)';
            }
        });
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopButton.style.opacity = '1';
                backToTopButton.style.transform = 'translateY(0)';
            } else {
                backToTopButton.style.opacity = '0';
                backToTopButton.style.transform = 'translateY(20px)';
            }
        });

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        function scrollToContent() {
            document.getElementById('main-content').scrollIntoView({
                behavior: 'smooth'
            });
        }

        function greeting() {
            const hour = new Date().getHours();
            const greetingElement = document.querySelector('.hero h1');
            
            if (hour < 6) {
                greetingElement.textContent = '夜深了，準備下次旅行吧';
            } else if (hour < 12) {
                greetingElement.textContent = '早安！開始新的旅程';
            } else if (hour < 18) {
                greetingElement.textContent = '午安！探索世界的美麗';
            } else {
                greetingElement.textContent = '晚安！回味今日的美景';
            }
        }

        greeting();

        fetch('article.json')
        .then(res => res.json())
        .then(posts => renderPosts(posts));

        function renderPosts(posts) {
            const container = document.querySelector('.posts-grid');
            container.innerHTML = posts.map(createPostCard).join('');
        }

        function createPostCard(post) {
            return `
                <article class="post-card">
                <div class="post-image">
                    ${post.url ? `<a href="${post.url}"><img src="${post.image}" alt="${post.alt}"></a>` : `<img src="${post.image}" alt="${post.alt}">`}
                </div>
                <div class="post-content">
                    <h3>${post.url ? `<a href="${post.url}">${post.title}</a>` : post.title}</h3>
                    <div class="post-meta">
                    <span class="date"><i class="far fa-calendar"></i> ${post.date}</span>
                    </div>
                    <p class="post-excerpt">
                    ${post.content.substring(0, 60)}...
                    </p>
                    <div class="post-tags">
                    ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    ${post.url ? `<div class="post-actions"><a href="${post.url}" class="read-more">閱讀全文 <i class="fas fa-arrow-right"></i></a></div>` : ''}
                </div>
                </article>
            `;
        }

        $('.tag-link').click(function(e){
            e.preventDefault();
            $('.tag-link').removeClass('active');
            $(this).addClass('active');

            let tagText = $(this).text();
            if (tagText === '全部') {
                $('.post-card').show();
            } else {
                $('.post-card').hide().filter(function() {
                    var tags = $(this).find('.post-tags .tag').map(function() {
                        return $(this).text();
                    }).get();
                    
                    return tags.includes(tagText);
                }).show();
            }
        });
    </script>
</body>
</html>
